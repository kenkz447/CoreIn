(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
ï»¿global.Admin = {
    login: require('./admin/login')
}

}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./admin/login":2}],2:[function(require,module,exports){
module.exports = {
    index: require('./login/index')
}

},{"./login/index":3}],3:[function(require,module,exports){
const $ = require('jquery');
const Redux = require('redux');
const reduxForm = require('redux-form').reduxForm;
const formReducer = require('redux-form').reducer;
const {Provider, connect} = require('react-redux');
const LoginForm = require('./index/components/loginForm');

const isType = (value, type) => {
    switch (type) {
        case 'email':
            return value && /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(value);
    }
    return false;
}

const validator = validating => values => {
    const errors = {};

    for (var property in validating) {

        var fieldName = validating[property].input.name;

        var hasRequired = validating[property].validate.required;
        var typeRequired = validating[property].validate.type;
        var minLengthRequired = validating[property].validate.minLength;
        var maxLengthRequired = validating[property].validate.maxLength;
        var hasCompare = validating[property].validate.compare;

        var hasContainLowercase = validating[property].validate.containLower;
        var hasContainUppercase = validating[property].validate.containUpper;
        var hasContainNumber = validating[property].validate.containNumber;
        var hasContainSpecialChar = validating[property].validate.containSpecial;

        if (hasRequired && hasRequired.value && !values[fieldName]) {
            errors[fieldName] = hasRequired.error;
        }
        else if (typeRequired && !isType(values[fieldName], typeRequired.value)) {
            errors[fieldName] = typeRequired.error;
        }
        else if (minLengthRequired && values[fieldName] && values[fieldName].length < minLengthRequired.value) {
            errors[fieldName] = minLengthRequired.error;
        }
        else if (hasCompare && values[fieldName] != values[hasCompare.value]) {
            errors[fieldName] = hasCompare.error;
        }
        else if (hasContainLowercase && !/(?=.*[a-z])/.test(values[fieldName])) {
            errors[fieldName] = hasContainLowercase.error;
        }
        else if (hasContainUppercase && !/(?=.*[A-Z])/.test(values[fieldName])) {
            errors[fieldName] = hasContainUppercase.error;
        }
        else if (hasContainNumber && !/(?=.*[0-9])/.test(values[fieldName])) {
            errors[fieldName] = hasContainNumber.error;
        }
        else if (hasContainSpecialChar && !/(?=.*[!@#$%^&*])/.test(values[fieldName])) {
            errors[fieldName] = hasContainSpecialChar.error;
        }
    }

    return errors;
}

const reducers = {
    form: formReducer
}

const reducer = Redux.combineReducers(reducers);

const store = Redux.createStore(reducer);

module.exports = (props) => {
    console.log(props);

    const {forms:
        {default: {title, description, fields, initialValues}}, resources} = props;

    const validate = validator(fields);

    var ReduxLoginForm = reduxForm({ form: 'registerForm', validate })(LoginForm);
    ReduxLoginForm = connect(
        state => ({
            initialValues,
            display: {
                title, description
            },
            fields
        })
    )(ReduxLoginForm);

    return (
        React.createElement(Provider, {store: store}, 
            React.createElement("div", {className: "container"}, 
                React.createElement("div", {className: "row"}, 
                    React.createElement("div", {className: "col-md-7 mx-auto mt-2 pull-xs-none vamiddle"}, 
                        React.createElement("div", {className: "card-group"}, 
                            React.createElement("div", {className: "card p-a-2"}, 
                                React.createElement(ReduxLoginForm, null)
                            ), 
                            React.createElement("div", {className: "card bg-transparent no-border no-shadow"}, 
                                React.createElement("div", {className: "card-block text-xs-center"}, 
                                    React.createElement("div", null, 
                                        React.createElement("h2", null, resources.register), 
                                        React.createElement("p", null, resources.registerDescription), 
                                        React.createElement("a", {href: resources.registerUrl, className: "btn btn-primary active"}, resources.registerLinkLabel)
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
    );
}


},{"./index/components/loginForm":4,"jquery":"XpFelZ","react-redux":"MzQWgz","redux":"czVV+t","redux-form":"LVfYvK"}],4:[function(require,module,exports){
const $ = require('jquery');
const { reduxForm, Field } = require('redux-form');

var {Button, Alert, Input, InputGroup, InputGroupAddon, FormFeedback, FormGroup, FormText, Label} = require('reactstrap');

const RenderInput = (props) => {
    const {input, id, type, placeholder, validationState} = props;

    return (
        React.createElement(Input, React.__spread({}, input, { id: id, state: validationState, type: type, placeholder: placeholder }))
    )
}

const RenderInputGroup = (props) => {
    const {input, display: {id, type, label, displayName, placeholder, prompt}, meta: {touched, error, warning}} = props;

    var validationState = touched ? (error ? 'danger' : (warning ? 'warning' : 'success')) : undefined;

    return (
        React.createElement(FormGroup, { color: validationState, className: "mb-1" },
            React.createElement(InputGroup, null,
                React.createElement(InputGroupAddon, { dangerouslySetInnerHTML: { __html: label } }),
                React.createElement(Input, React.__spread({}, input, { id: id, state: validationState, type: type, placeholder: placeholder ? placeholder : displayName }))
            ),
            prompt && React.createElement(FormText, { color: "muted" }, prompt),
            touched && ((error && React.createElement(FormFeedback, null, error)) || (warning && React.createElement(FormFeedback, null, warning)))
        )
    );
}

const RenderCheckBox = (props) => {
    const {input, display: {id, placeholder}} = props;
    return (
        React.createElement(FormGroup, { check: true },
            React.createElement(Label, { check: true },
                React.createElement(Input, React.__spread({}, input, { id: id, type: "checkbox" })),
                ' ' + placeholder
            )
        )
    );
}

const renderField = props => {
    const {display: {renderType}} = props;
    if (renderType === "inputgroup") {
        return RenderInputGroup(props);
    } else if (renderType === 'formgroup') {
        return RenderFormGroup(props);
    } else if (renderType === 'checkbox') {
        return RenderCheckBox(props);
    }
}

const submit = Corein.components.form.submit({
    url: 'login',
    method: 'POST',
    successAction: (response) => {
        window.location.href = response.result;
}});

const form = (props) => {
    const { error, handleSubmit, pristine, reset, submitting, submitSucceeded, fields, display } = props;

    const formFields = [];

    $.map(fields, (props, index) => {
        const {input: {name, value}, display} = props;
        formFields.push(React.createElement(Field, {key: index, component: renderField, name: name, value: value, display: display}));
    });

    return (
        React.createElement("div", {id: "LoginForm"}, 
            React.createElement("form", {onSubmit: handleSubmit(submit), className: "card-block"}, 
                React.createElement("h1", null, display.title), 
                React.createElement("p", {className: "text-muted"}, display.description), 
                !submitting && (error && React.createElement(Alert, {color: "danger"}, error)), 
                formFields, 
                React.createElement("div", null, 
                    React.createElement(Button, {type: "submit", disabled: submitting}, display.submitLabel ? display.submitLabel : "Submit")
                )
            )
        )
    );
};

module.exports = form

},{"jquery":"XpFelZ","reactstrap":"jldOQ7","redux-form":"LVfYvK"}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0c1xcZG90bmV0XFxDb3JlSW5cXENvcmVJblxcc3JjXFxNb2R1bGVzXFxDb3JlSW4uTW9kdWxlcy5Mb2dpblxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwiRDpcXHByb2plY3RzXFxkb3RuZXRcXENvcmVJblxcQ29yZUluXFxzcmNcXE1vZHVsZXNcXENvcmVJbi5Nb2R1bGVzLkxvZ2luXFxkZXZlbG9wXFxzY3JpcHRzXFxhZG1pbi5qc3giLCJEOlxccHJvamVjdHNcXGRvdG5ldFxcQ29yZUluXFxDb3JlSW5cXHNyY1xcTW9kdWxlc1xcQ29yZUluLk1vZHVsZXMuTG9naW5cXGRldmVsb3BcXHNjcmlwdHNcXGFkbWluXFxsb2dpbi5qc3giLCJEOlxccHJvamVjdHNcXGRvdG5ldFxcQ29yZUluXFxDb3JlSW5cXHNyY1xcTW9kdWxlc1xcQ29yZUluLk1vZHVsZXMuTG9naW5cXGRldmVsb3BcXHNjcmlwdHNcXGFkbWluXFxsb2dpblxcaW5kZXguanN4IiwiRDpcXHByb2plY3RzXFxkb3RuZXRcXENvcmVJblxcQ29yZUluXFxzcmNcXE1vZHVsZXNcXENvcmVJbi5Nb2R1bGVzLkxvZ2luXFxkZXZlbG9wXFxzY3JpcHRzXFxhZG1pblxcbG9naW5cXGluZGV4XFxjb21wb25lbnRzXFxsb2dpbkZvcm0uanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHO0lBQ1osS0FBSyxFQUFFLE9BQU8sQ0FBQyxlQUFlLENBQUM7Ozs7OztBQ0RuQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUc7SUFDZCxLQUFLLEVBQUUsT0FBTyxDQUFDLGVBQWUsQ0FBQzs7OztBQ0RuQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM3QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDL0IsTUFBTSxTQUFTLEdBQUcs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QUFhLENBQUEsRUFBQTtnQkFDekQsb0JBQUEsSUFBRyxFQUFBLElBQUMsRUFBQyxPQUFPLENBQUMsS0FBVyxDQUFBLEVBQUE7Z0JBQ3hCLG9CQUFBLEdBQUUsRUFBQSxDQUFBLENBQUMsU0FBQSxFQUFTLENBQUMsWUFBYSxDQUFBLEVBQUMsT0FBTyxDQUFDLFdBQWdCLENBQUEsRUFBQTtnQkFDbEQsQ0FBQyxVQUFVLEtBQUssS0FBSyxJQUFJLG9CQUFDLEtBQUssRUFBQSxDQUFBLENBQUMsS0FBQSxFQUFLLENBQUMsUUFBUyxDQUFBLEVBQUMsS0FBYyxDQUFBLENBQUMsRUFBQztnQkFDaEUsVUFBVSxFQUFDO2dCQUNaLG9CQUFBLEtBQUksRUFBQSxJQUFDLEVBQUE7b0JBQ0Qsb0JBQUMsTUFBTSxFQUFBLENBQUEsQ0FBQyxJQUFBLEVBQUksQ0FBQyxRQUFBLEVBQVEsQ0FBQyxRQUFBLEVBQVEsQ0FBRSxVQUFZLENBQUEsRUFBQyxPQUFPLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxXQUFXLEdBQUcsUUFBa0IsQ0FBQTtnQkFDekcsQ0FBQTtZQUNILENBQUE7UUFDTCxDQUFBO01BQ1I7QUFDTixDQUFDLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCLvu79nbG9iYWwuQWRtaW4gPSB7XHJcbiAgICBsb2dpbjogcmVxdWlyZSgnLi9hZG1pbi9sb2dpbicpXHJcbn0iLCLvu79tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGluZGV4OiByZXF1aXJlKCcuL2xvZ2luL2luZGV4JylcclxufSIsIu+7v2NvbnN0ICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuY29uc3QgUmVkdXggPSByZXF1aXJlKCdyZWR1eCcpO1xyXG5jb25zdCByZWR1eEZvcm0gPSByZXF1aXJlKCdyZWR1eC1mb3JtJykucmVkdXhGb3JtO1xyXG5jb25zdCBmb3JtUmVkdWNlciA9IHJlcXVpcmUoJ3JlZHV4LWZvcm0nKS5yZWR1Y2VyO1xyXG5jb25zdCB7UHJvdmlkZXIsIGNvbm5lY3R9ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcclxuY29uc3QgTG9naW5Gb3JtID0gcmVxdWlyZSgnLi9pbmRleC9jb21wb25lbnRzL2xvZ2luRm9ybScpO1xyXG5cclxuY29uc3QgaXNUeXBlID0gKHZhbHVlLCB0eXBlKSA9PiB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlICdlbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAmJiAvXltBLVowLTkuXyUrLV0rQFtBLVowLTkuLV0rXFwuW0EtWl17Miw0fSQvaS50ZXN0KHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuY29uc3QgdmFsaWRhdG9yID0gdmFsaWRhdGluZyA9PiB2YWx1ZXMgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JzID0ge307XHJcblxyXG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gdmFsaWRhdGluZykge1xyXG5cclxuICAgICAgICB2YXIgZmllbGROYW1lID0gdmFsaWRhdGluZ1twcm9wZXJ0eV0uaW5wdXQubmFtZTtcclxuXHJcbiAgICAgICAgdmFyIGhhc1JlcXVpcmVkID0gdmFsaWRhdGluZ1twcm9wZXJ0eV0udmFsaWRhdGUucmVxdWlyZWQ7XHJcbiAgICAgICAgdmFyIHR5cGVSZXF1aXJlZCA9IHZhbGlkYXRpbmdbcHJvcGVydHldLnZhbGlkYXRlLnR5cGU7XHJcbiAgICAgICAgdmFyIG1pbkxlbmd0aFJlcXVpcmVkID0gdmFsaWRhdGluZ1twcm9wZXJ0eV0udmFsaWRhdGUubWluTGVuZ3RoO1xyXG4gICAgICAgIHZhciBtYXhMZW5ndGhSZXF1aXJlZCA9IHZhbGlkYXRpbmdbcHJvcGVydHldLnZhbGlkYXRlLm1heExlbmd0aDtcclxuICAgICAgICB2YXIgaGFzQ29tcGFyZSA9IHZhbGlkYXRpbmdbcHJvcGVydHldLnZhbGlkYXRlLmNvbXBhcmU7XHJcblxyXG4gICAgICAgIHZhciBoYXNDb250YWluTG93ZXJjYXNlID0gdmFsaWRhdGluZ1twcm9wZXJ0eV0udmFsaWRhdGUuY29udGFpbkxvd2VyO1xyXG4gICAgICAgIHZhciBoYXNDb250YWluVXBwZXJjYXNlID0gdmFsaWRhdGluZ1twcm9wZXJ0eV0udmFsaWRhdGUuY29udGFpblVwcGVyO1xyXG4gICAgICAgIHZhciBoYXNDb250YWluTnVtYmVyID0gdmFsaWRhdGluZ1twcm9wZXJ0eV0udmFsaWRhdGUuY29udGFpbk51bWJlcjtcclxuICAgICAgICB2YXIgaGFzQ29udGFpblNwZWNpYWxDaGFyID0gdmFsaWRhdGluZ1twcm9wZXJ0eV0udmFsaWRhdGUuY29udGFpblNwZWNpYWw7XHJcblxyXG4gICAgICAgIGlmIChoYXNSZXF1aXJlZCAmJiBoYXNSZXF1aXJlZC52YWx1ZSAmJiAhdmFsdWVzW2ZpZWxkTmFtZV0pIHtcclxuICAgICAgICAgICAgZXJyb3JzW2ZpZWxkTmFtZV0gPSBoYXNSZXF1aXJlZC5lcnJvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZVJlcXVpcmVkICYmICFpc1R5cGUodmFsdWVzW2ZpZWxkTmFtZV0sIHR5cGVSZXF1aXJlZC52YWx1ZSkpIHtcclxuICAgICAgICAgICAgZXJyb3JzW2ZpZWxkTmFtZV0gPSB0eXBlUmVxdWlyZWQuZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG1pbkxlbmd0aFJlcXVpcmVkICYmIHZhbHVlc1tmaWVsZE5hbWVdICYmIHZhbHVlc1tmaWVsZE5hbWVdLmxlbmd0aCA8IG1pbkxlbmd0aFJlcXVpcmVkLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIGVycm9yc1tmaWVsZE5hbWVdID0gbWluTGVuZ3RoUmVxdWlyZWQuZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGhhc0NvbXBhcmUgJiYgdmFsdWVzW2ZpZWxkTmFtZV0gIT0gdmFsdWVzW2hhc0NvbXBhcmUudmFsdWVdKSB7XHJcbiAgICAgICAgICAgIGVycm9yc1tmaWVsZE5hbWVdID0gaGFzQ29tcGFyZS5lcnJvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaGFzQ29udGFpbkxvd2VyY2FzZSAmJiAhLyg/PS4qW2Etel0pLy50ZXN0KHZhbHVlc1tmaWVsZE5hbWVdKSkge1xyXG4gICAgICAgICAgICBlcnJvcnNbZmllbGROYW1lXSA9IGhhc0NvbnRhaW5Mb3dlcmNhc2UuZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGhhc0NvbnRhaW5VcHBlcmNhc2UgJiYgIS8oPz0uKltBLVpdKS8udGVzdCh2YWx1ZXNbZmllbGROYW1lXSkpIHtcclxuICAgICAgICAgICAgZXJyb3JzW2ZpZWxkTmFtZV0gPSBoYXNDb250YWluVXBwZXJjYXNlLmVycm9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChoYXNDb250YWluTnVtYmVyICYmICEvKD89LipbMC05XSkvLnRlc3QodmFsdWVzW2ZpZWxkTmFtZV0pKSB7XHJcbiAgICAgICAgICAgIGVycm9yc1tmaWVsZE5hbWVdID0gaGFzQ29udGFpbk51bWJlci5lcnJvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaGFzQ29udGFpblNwZWNpYWxDaGFyICYmICEvKD89LipbIUAjJCVeJipdKS8udGVzdCh2YWx1ZXNbZmllbGROYW1lXSkpIHtcclxuICAgICAgICAgICAgZXJyb3JzW2ZpZWxkTmFtZV0gPSBoYXNDb250YWluU3BlY2lhbENoYXIuZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBlcnJvcnM7XHJcbn1cclxuXHJcbmNvbnN0IHJlZHVjZXJzID0ge1xyXG4gICAgZm9ybTogZm9ybVJlZHVjZXJcclxufVxyXG5cclxuY29uc3QgcmVkdWNlciA9IFJlZHV4LmNvbWJpbmVSZWR1Y2VycyhyZWR1Y2Vycyk7XHJcblxyXG5jb25zdCBzdG9yZSA9IFJlZHV4LmNyZWF0ZVN0b3JlKHJlZHVjZXIpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAocHJvcHMpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKHByb3BzKTtcclxuXHJcbiAgICBjb25zdCB7Zm9ybXM6XHJcbiAgICAgICAge2RlZmF1bHQ6IHt0aXRsZSwgZGVzY3JpcHRpb24sIGZpZWxkcywgaW5pdGlhbFZhbHVlc319LCByZXNvdXJjZXN9ID0gcHJvcHM7XHJcblxyXG4gICAgY29uc3QgdmFsaWRhdGUgPSB2YWxpZGF0b3IoZmllbGRzKTtcclxuXHJcbiAgICB2YXIgUmVkdXhMb2dpbkZvcm0gPSByZWR1eEZvcm0oeyBmb3JtOiAncmVnaXN0ZXJGb3JtJywgdmFsaWRhdGUgfSkoTG9naW5Gb3JtKTtcclxuICAgIFJlZHV4TG9naW5Gb3JtID0gY29ubmVjdChcclxuICAgICAgICBzdGF0ZSA9PiAoe1xyXG4gICAgICAgICAgICBpbml0aWFsVmFsdWVzLFxyXG4gICAgICAgICAgICBkaXNwbGF5OiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZSwgZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmllbGRzXHJcbiAgICAgICAgfSlcclxuICAgICkoUmVkdXhMb2dpbkZvcm0pO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTcgbXgtYXV0byBtdC0yIHB1bGwteHMtbm9uZSB2YW1pZGRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZCBwLWEtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSZWR1eExvZ2luRm9ybS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZCBiZy10cmFuc3BhcmVudCBuby1ib3JkZXIgbm8tc2hhZG93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWJsb2NrIHRleHQteHMtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDI+e3Jlc291cmNlcy5yZWdpc3Rlcn08L2gyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3Jlc291cmNlcy5yZWdpc3RlckRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e3Jlc291cmNlcy5yZWdpc3RlclVybH0gY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5IGFjdGl2ZVwiPntyZXNvdXJjZXMucmVnaXN0ZXJMaW5rTGFiZWx9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L1Byb3ZpZGVyPlxyXG4gICAgKTtcclxufVxyXG4iLCLvu79jb25zdCAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbmNvbnN0IHsgcmVkdXhGb3JtLCBGaWVsZCB9ID0gcmVxdWlyZSgncmVkdXgtZm9ybScpO1xyXG5cclxudmFyIHtCdXR0b24sIEFsZXJ0LCBJbnB1dCwgSW5wdXRHcm91cCwgSW5wdXRHcm91cEFkZG9uLCBGb3JtRmVlZGJhY2ssIEZvcm1Hcm91cCwgRm9ybVRleHQsIExhYmVsfSA9IHJlcXVpcmUoJ3JlYWN0c3RyYXAnKTtcclxuXHJcbmNvbnN0IFJlbmRlcklucHV0ID0gKHByb3BzKSA9PiB7XHJcbiAgICBjb25zdCB7aW5wdXQsIGlkLCB0eXBlLCBwbGFjZWhvbGRlciwgdmFsaWRhdGlvblN0YXRlfSA9IHByb3BzO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgUmVhY3QuX19zcHJlYWQoe30sIGlucHV0LCB7IGlkOiBpZCwgc3RhdGU6IHZhbGlkYXRpb25TdGF0ZSwgdHlwZTogdHlwZSwgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyIH0pKVxyXG4gICAgKVxyXG59XHJcblxyXG5jb25zdCBSZW5kZXJJbnB1dEdyb3VwID0gKHByb3BzKSA9PiB7XHJcbiAgICBjb25zdCB7aW5wdXQsIGRpc3BsYXk6IHtpZCwgdHlwZSwgbGFiZWwsIGRpc3BsYXlOYW1lLCBwbGFjZWhvbGRlciwgcHJvbXB0fSwgbWV0YToge3RvdWNoZWQsIGVycm9yLCB3YXJuaW5nfX0gPSBwcm9wcztcclxuXHJcbiAgICB2YXIgdmFsaWRhdGlvblN0YXRlID0gdG91Y2hlZCA/IChlcnJvciA/ICdkYW5nZXInIDogKHdhcm5pbmcgPyAnd2FybmluZycgOiAnc3VjY2VzcycpKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybUdyb3VwLCB7IGNvbG9yOiB2YWxpZGF0aW9uU3RhdGUsIGNsYXNzTmFtZTogXCJtYi0xXCIgfSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dEdyb3VwLCBudWxsLFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dEdyb3VwQWRkb24sIHsgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsgX19odG1sOiBsYWJlbCB9IH0pLFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgUmVhY3QuX19zcHJlYWQoe30sIGlucHV0LCB7IGlkOiBpZCwgc3RhdGU6IHZhbGlkYXRpb25TdGF0ZSwgdHlwZTogdHlwZSwgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyID8gcGxhY2Vob2xkZXIgOiBkaXNwbGF5TmFtZSB9KSlcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgcHJvbXB0ICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybVRleHQsIHsgY29sb3I6IFwibXV0ZWRcIiB9LCBwcm9tcHQpLFxyXG4gICAgICAgICAgICB0b3VjaGVkICYmICgoZXJyb3IgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtRmVlZGJhY2ssIG51bGwsIGVycm9yKSkgfHwgKHdhcm5pbmcgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtRmVlZGJhY2ssIG51bGwsIHdhcm5pbmcpKSlcclxuICAgICAgICApXHJcbiAgICApO1xyXG59XHJcblxyXG5jb25zdCBSZW5kZXJDaGVja0JveCA9IChwcm9wcykgPT4ge1xyXG4gICAgY29uc3Qge2lucHV0LCBkaXNwbGF5OiB7aWQsIHBsYWNlaG9sZGVyfX0gPSBwcm9wcztcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtR3JvdXAsIHsgY2hlY2s6IHRydWUgfSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbCwgeyBjaGVjazogdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgUmVhY3QuX19zcHJlYWQoe30sIGlucHV0LCB7IGlkOiBpZCwgdHlwZTogXCJjaGVja2JveFwiIH0pKSxcclxuICAgICAgICAgICAgICAgICcgJyArIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcbiAgICApO1xyXG59XHJcblxyXG5jb25zdCByZW5kZXJGaWVsZCA9IHByb3BzID0+IHtcclxuICAgIGNvbnN0IHtkaXNwbGF5OiB7cmVuZGVyVHlwZX19ID0gcHJvcHM7XHJcbiAgICBpZiAocmVuZGVyVHlwZSA9PT0gXCJpbnB1dGdyb3VwXCIpIHtcclxuICAgICAgICByZXR1cm4gUmVuZGVySW5wdXRHcm91cChwcm9wcyk7XHJcbiAgICB9IGVsc2UgaWYgKHJlbmRlclR5cGUgPT09ICdmb3JtZ3JvdXAnKSB7XHJcbiAgICAgICAgcmV0dXJuIFJlbmRlckZvcm1Hcm91cChwcm9wcyk7XHJcbiAgICB9IGVsc2UgaWYgKHJlbmRlclR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICByZXR1cm4gUmVuZGVyQ2hlY2tCb3gocHJvcHMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBzdWJtaXQgPSBDb3JlaW4uY29tcG9uZW50cy5mb3JtLnN1Ym1pdCh7XHJcbiAgICB1cmw6ICdsb2dpbicsXHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIHN1Y2Nlc3NBY3Rpb246IChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVzcG9uc2UucmVzdWx0O1xyXG59fSk7XHJcblxyXG5jb25zdCBmb3JtID0gKHByb3BzKSA9PiB7XHJcbiAgICBjb25zdCB7IGVycm9yLCBoYW5kbGVTdWJtaXQsIHByaXN0aW5lLCByZXNldCwgc3VibWl0dGluZywgc3VibWl0U3VjY2VlZGVkLCBmaWVsZHMsIGRpc3BsYXkgfSA9IHByb3BzO1xyXG5cclxuICAgIGNvbnN0IGZvcm1GaWVsZHMgPSBbXTtcclxuXHJcbiAgICAkLm1hcChmaWVsZHMsIChwcm9wcywgaW5kZXgpID0+IHtcclxuICAgICAgICBjb25zdCB7aW5wdXQ6IHtuYW1lLCB2YWx1ZX0sIGRpc3BsYXl9ID0gcHJvcHM7XHJcbiAgICAgICAgZm9ybUZpZWxkcy5wdXNoKDxGaWVsZCBrZXk9e2luZGV4fSBjb21wb25lbnQ9e3JlbmRlckZpZWxkfSBuYW1lPXtuYW1lfSB2YWx1ZT17dmFsdWV9IGRpc3BsYXk9e2Rpc3BsYXl9IC8+KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBpZD1cIkxvZ2luRm9ybVwiPlxyXG4gICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0KHN1Ym1pdCl9IGNsYXNzTmFtZT1cImNhcmQtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgIDxoMT57ZGlzcGxheS50aXRsZX08L2gxPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1tdXRlZFwiPntkaXNwbGF5LmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgIHshc3VibWl0dGluZyAmJiAoZXJyb3IgJiYgPEFsZXJ0IGNvbG9yPVwiZGFuZ2VyXCI+e2Vycm9yfTwvQWxlcnQ+KX1cclxuICAgICAgICAgICAgICAgIHtmb3JtRmllbGRzfVxyXG4gICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBkaXNhYmxlZD17c3VibWl0dGluZ30+e2Rpc3BsYXkuc3VibWl0TGFiZWwgPyBkaXNwbGF5LnN1Ym1pdExhYmVsIDogXCJTdWJtaXRcIn08L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmb3JtIl19
